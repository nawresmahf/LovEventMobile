(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{MjGR:function(n,t,e){"use strict";e.r(t);var l=e("CcnG"),u=e("26FU"),o=e("N+K7"),i=function(){function n(n){this.httpService=n,this.feedData$=new u.a([])}return n.prototype.changeFeedData=function(n){this.feedData$.next(n)},n.prototype.getCurrentFeedData=function(){return this.feedData$.getValue()},n.prototype.updateFeedData=function(n){var t=[];t.push(n);var e=this.getCurrentFeedData(),l=t.concat(e);this.changeFeedData(l)},n.prototype.deleteFeedData=function(n){var t=this.getCurrentFeedData();t.splice(n,1);var e=[].concat(t);this.changeFeedData(e)},n.prototype.feedData=function(n){return this.httpService.post("acceuil",n)},n.prototype.feedDelete=function(n){return this.httpService.post("publication supprim\xe9e",n)},n.prototype.feedUpdate=function(n){return this.httpService.post("feedUpdate",n)},n.ngInjectableDef=l.Nb({factory:function(){return new n(l.Ob(o.a))},token:n,providedIn:"root"}),n}(),r=e("lGQG"),a=e("2g2N"),s=function(){function n(n,t,e){this.auth=n,this.feedSerive=t,this.toastService=e,this.postData={user_id:"",token:""}}return n.prototype.ngOnInit=function(){var n=this;this.auth.userData$.subscribe(function(t){n.authUser=t,n.feedData()})},n.prototype.feedData=function(){var n=this;console.log(this.authUser),this.postData.user_id=this.authUser.user_id,this.postData.token=this.authUser.token,this.postData.user_id&&this.postData.token&&this.feedSerive.feedData(this.postData).subscribe(function(t){n.feedSerive.changeFeedData(t.feedData)},function(t){n.toastService.presentToast("Probl\xe9me de connection   .")})},n}(),c=function(){return function(){}}(),d=e("pMnS"),h=e("oBZk"),b=e("ZZ/e"),p=e("gIcY"),f=function(){function n(n){this.feedService=n,this.postData={feed:"",feed_id:"",lastCreated:"",token:"",user_id:""}}return n.prototype.ngOnInit=function(){},n.prototype.feedUpdateAction=function(){var n=this;this.postData.feed.length>0&&(this.postData.lastCreated="",this.postData.user_id=this.loginUser.user_id,this.postData.token=this.loginUser.token,this.feedService.feedUpdate(this.postData).subscribe(function(t){n.postData.feed="",n.feedService.updateFeedData(t.feedData)}))},n}(),g=l.qb({encapsulation:0,styles:[[""]],data:{}});function D(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,8,"ion-item",[],null,null,null,h.B,h.i)),l.rb(1,49152,null,0,b.F,[l.h,l.k,l.z],null,null),(n()(),l.sb(2,0,null,0,6,"ion-textarea",[["placeholder","E..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,t,e){var u=!0,o=n.component;return"ionBlur"===t&&(u=!1!==l.Db(n,3)._handleBlurEvent(e.target)&&u),"ionChange"===t&&(u=!1!==l.Db(n,3)._handleInputEvent(e.target)&&u),"ngModelChange"===t&&(u=!1!==(o.postData.feed=e)&&u),u},h.J,h.q)),l.rb(3,16384,null,0,b.Ib,[l.k],null,null),l.Fb(1024,null,p.c,function(n){return[n]},[b.Ib]),l.rb(5,671744,null,0,p.h,[[8,null],[8,null],[8,null],[6,p.c]],{model:[0,"model"]},{update:"ngModelChange"}),l.Fb(2048,null,p.d,null,[p.h]),l.rb(7,16384,null,0,p.e,[[4,p.d]],null,null),l.rb(8,49152,null,0,b.vb,[l.h,l.k,l.z],{placeholder:[0,"placeholder"]},null),(n()(),l.sb(9,0,null,null,4,"ion-item",[],null,null,null,h.B,h.i)),l.rb(10,49152,null,0,b.F,[l.h,l.k,l.z],null,null),(n()(),l.sb(11,0,null,0,2,"ion-button",[["color","mango"],["item-end",""]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.feedUpdateAction()&&l),l},h.u,h.b)),l.rb(12,49152,null,0,b.i,[l.h,l.k,l.z],{color:[0,"color"]},null),(n()(),l.Ib(-1,0,["Update"]))],function(n,t){n(t,5,0,t.component.postData.feed),n(t,8,0,"E..."),n(t,12,0,"mango")},function(n,t){n(t,2,0,l.Db(t,7).ngClassUntouched,l.Db(t,7).ngClassTouched,l.Db(t,7).ngClassPristine,l.Db(t,7).ngClassDirty,l.Db(t,7).ngClassValid,l.Db(t,7).ngClassInvalid,l.Db(t,7).ngClassPending)})}var v=function(){function n(n,t){this.changeDetectorRef=n,this.ngZone=t}return n.prototype.transform=function(n){var t=this;this.removeTimer();var e=new Date(n),l=new Date,u=Math.round(Math.abs((l.getTime()-e.getTime())/1e3)),o=Number.isNaN(u)?1e3:1e3*this.getSecondsUntilUpdate(u);this.timer=this.ngZone.runOutsideAngular(function(){return"undefined"!=typeof window?window.setTimeout(function(){t.ngZone.run(function(){return t.changeDetectorRef.markForCheck()})},o):null});var i=Math.round(Math.abs(u/60)),r=Math.round(Math.abs(i/60)),a=Math.round(Math.abs(r/24)),s=Math.round(Math.abs(a/30.416)),c=Math.round(Math.abs(a/365));return Number.isNaN(u)?"":u<=45?"a few seconds ago":u<=90?"a minute ago":i<=45?i+" minutes ago":i<=90?"an hour ago":r<=22?r+" hours ago":r<=36?"a day ago":a<=25?a+" days ago":a<=45?"a month ago":a<=345?s+" months ago":a<=545?"a year ago":c+" years ago"},n.prototype.ngOnDestroy=function(){this.removeTimer()},n.prototype.removeTimer=function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)},n.prototype.getSecondsUntilUpdate=function(n){return n<60?2:n<3600?30:n<86400?300:3600},n}(),m=function(){function n(){}return n.prototype.ngOnInit=function(){this.newTime=this.converTime(this.created)},n.prototype.converTime=function(n){return new Date(1e3*n)},n}(),k=l.qb({encapsulation:0,styles:[[""]],data:{}});function y(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),l.Ib(1,null,[" "," "])),l.Eb(131072,v,[l.h,l.z])],null,function(n,t){var e=t.component;n(t,1,0,l.Jb(t,1,0,l.Db(t,2).transform(e.newTime)))})}var C=e("Ip0R"),U=e("mrSG"),B=function(){function n(n){this.alertController=n}return n.prototype.presentAlertConfirm=function(n,t){return U.b(this,void 0,void 0,function(){var e,l;return U.e(this,function(u){switch(u.label){case 0:return[4,this.alertController.create({header:n,message:t,buttons:[{text:"Annuler",role:"cancel"},{text:"Oui",role:"okay"}]})];case 1:return[4,(l=u.sent()).present()];case 2:return u.sent(),[4,l.onDidDismiss().then(function(n){e=n})];case 3:return u.sent(),[2,e]}})})},n.ngInjectableDef=l.Nb({factory:function(){return new n(l.Ob(b.a))},token:n,providedIn:"root"}),n}(),M=function(){function n(n,t){this.feedSerivce=n,this.alertSerivce=t,this.postData={user_id:"",token:"",feed_id:""}}return n.prototype.ngOnInit=function(){var n=this;this.feedSerivce.feedData$.subscribe(function(t){n.feedData=t})},n.prototype.feedDeleteAction=function(n,t){var e=this;this.postData.user_id=this.loginUser.user_id,this.postData.token=this.loginUser.token,this.postData.feed_id=t,this.alertSerivce.presentAlertConfirm("publication supprim\xe9","Vous \xe9tes sur ?").then(function(t){"oui"===t.role&&e.feedSerivce.feedDelete(e.postData).subscribe(function(t){t.success&&e.feedSerivce.deleteFeedData(n)})})},n}(),w=l.qb({encapsulation:0,styles:[[".right[_ngcontent-%COMP%]{float:right}.right[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333!important}"]],data:{}});function F(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,9,"ion-card",[],null,null,null,h.w,h.c)),l.rb(1,49152,null,0,b.k,[l.h,l.k,l.z],null,null),(n()(),l.sb(2,0,null,0,7,"ion-card-content",[],null,null,null,h.v,h.d)),l.rb(3,49152,null,0,b.l,[l.h,l.k,l.z],null,null),(n()(),l.sb(4,0,null,0,2,"button",[["class","right"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.feedDeleteAction(n.context.index,n.context.$implicit.feed_id)&&l),l},null,null)),(n()(),l.sb(5,0,null,null,1,"ion-icon",[["name","trash"]],null,null,null,h.z,h.g)),l.rb(6,49152,null,0,b.A,[l.h,l.k,l.z],{name:[0,"name"]},null),(n()(),l.sb(7,0,null,0,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(n()(),l.sb(8,0,null,0,1,"app-timeago",[],null,null,null,y,k)),l.rb(9,114688,null,0,m,[],{created:[0,"created"]},null)],function(n,t){n(t,6,0,"trash"),n(t,9,0,t.context.$implicit.created)},function(n,t){n(t,7,0,t.context.$implicit.feed)})}function S(n){return l.Kb(0,[(n()(),l.hb(16777216,null,null,1,null,F)),l.rb(1,278528,null,0,C.h,[l.N,l.K,l.s],{ngForOf:[0,"ngForOf"]},null)],function(n,t){n(t,1,0,t.component.feedData)},null)}var _=l.qb({encapsulation:0,styles:[[""]],data:{}});function z(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,6,"ion-header",[],null,null,null,h.y,h.f)),l.rb(1,49152,null,0,b.z,[l.h,l.k,l.z],null,null),(n()(),l.sb(2,0,null,0,4,"ion-toolbar",[],null,null,null,h.L,h.s)),l.rb(3,49152,null,0,b.zb,[l.h,l.k,l.z],null,null),(n()(),l.sb(4,0,null,0,2,"ion-title",[],null,null,null,h.K,h.r)),l.rb(5,49152,null,0,b.xb,[l.h,l.k,l.z],null,null),(n()(),l.Ib(-1,0,["Accueil"])),(n()(),l.sb(7,0,null,null,9,"ion-content",[],null,null,null,h.x,h.e)),l.rb(8,49152,null,0,b.s,[l.h,l.k,l.z],null,null),(n()(),l.sb(9,0,null,0,3,"ion-item",[],null,null,null,h.B,h.i)),l.rb(10,49152,null,0,b.F,[l.h,l.k,l.z],null,null),(n()(),l.sb(11,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),l.Ib(12,null,[" Bienvenue dans LovEvent ",""])),(n()(),l.sb(13,0,null,0,1,"app-feed-update",[],null,null,null,D,g)),l.rb(14,114688,null,0,f,[i],{loginUser:[0,"loginUser"]},null),(n()(),l.sb(15,0,null,0,1,"app-feed-card",[],null,null,null,S,w)),l.rb(16,114688,null,0,M,[i,B],{loginUser:[0,"loginUser"]},null)],function(n,t){var e=t.component;n(t,14,0,e.authUser),n(t,16,0,e.authUser)},function(n,t){var e=t.component;n(t,12,0,null==e.authUser?null:e.authUser.name)})}function I(n){return l.Kb(0,[(n()(),l.sb(0,0,null,null,1,"app-feed",[],null,null,null,z,_)),l.rb(1,114688,null,0,s,[r.a,i,a.a],null,null)],function(n,t){n(t,1,0)},null)}var O=l.ob("app-feed",s,I,{},{},[]),T=e("j1ZV"),x=e("ZYCi");e.d(t,"FeedPageModuleNgFactory",function(){return N});var N=l.pb(c,[],function(n){return l.Ab([l.Bb(512,l.j,l.ab,[[8,[d.a,O]],[3,l.j],l.x]),l.Bb(4608,C.j,C.i,[l.u,[2,C.p]]),l.Bb(4608,p.j,p.j,[]),l.Bb(4608,b.b,b.b,[l.z,l.g]),l.Bb(4608,b.Db,b.Db,[b.b,l.j,l.q]),l.Bb(4608,b.Gb,b.Gb,[b.b,l.j,l.q]),l.Bb(1073742336,C.b,C.b,[]),l.Bb(1073742336,p.i,p.i,[]),l.Bb(1073742336,p.b,p.b,[]),l.Bb(1073742336,b.Bb,b.Bb,[]),l.Bb(1073742336,T.a,T.a,[]),l.Bb(1073742336,x.p,x.p,[[2,x.u],[2,x.m]]),l.Bb(1073742336,c,c,[]),l.Bb(1024,x.k,function(){return[[{path:"",component:s}]]},[])])})}}]);