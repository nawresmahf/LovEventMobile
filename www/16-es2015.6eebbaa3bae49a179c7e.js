(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{MjGR:function(n,e,t){"use strict";t.r(e);var l=t("8Y7J"),u=t("2Vo4"),a=t("N+K7");let i=(()=>{class n{constructor(n){this.httpService=n,this.feedData$=new u.a([])}changeFeedData(n){this.feedData$.next(n)}getCurrentFeedData(){return this.feedData$.getValue()}updateFeedData(n){let e=[];e.push(n);let t=this.getCurrentFeedData(),l=e.concat(t);this.changeFeedData(l)}deleteFeedData(n){let e=this.getCurrentFeedData();e.splice(n,1);let t=[].concat(e);this.changeFeedData(t)}feedData(n){return this.httpService.post("acceuil",n)}feedDelete(n){return this.httpService.post("publication supprim\xe9e",n)}feedUpdate(n){return this.httpService.post("feedUpdate",n)}}return n.ngInjectableDef=l.Lb({factory:function(){return new n(l.Mb(a.a))},token:n,providedIn:"root"}),n})();var o=t("lGQG"),r=t("2g2N");class s{constructor(n,e,t){this.auth=n,this.feedSerive=e,this.toastService=t,this.postData={user_id:"",token:""}}ngOnInit(){this.auth.userData$.subscribe(n=>{this.authUser=n,this.feedData()})}feedData(){console.log(this.authUser),this.postData.user_id=this.authUser.user_id,this.postData.token=this.authUser.token,this.postData.user_id&&this.postData.token&&this.feedSerive.feedData(this.postData).subscribe(n=>{this.feedSerive.changeFeedData(n.feedData)},n=>{this.toastService.presentToast("Probl\xe9me de connection   .")})}}class c{}var d=t("pMnS"),h=t("oBZk"),b=t("ZZ/e"),p=t("s7LF");class g{constructor(n){this.feedService=n,this.postData={feed:"",feed_id:"",lastCreated:"",token:"",user_id:""}}ngOnInit(){}feedUpdateAction(){this.postData.feed.length>0&&(this.postData.lastCreated="",this.postData.user_id=this.loginUser.user_id,this.postData.token=this.loginUser.token,this.feedService.feedUpdate(this.postData).subscribe(n=>{this.postData.feed="",this.feedService.updateFeedData(n.feedData)}))}}var f=l.ob({encapsulation:0,styles:[[""]],data:{}});function m(n){return l.Ib(0,[(n()(),l.qb(0,0,null,null,8,"ion-item",[],null,null,null,h.B,h.i)),l.pb(1,49152,null,0,b.F,[l.h,l.k,l.x],null,null),(n()(),l.qb(2,0,null,0,6,"ion-textarea",[["placeholder","E..."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,e,t){var u=!0,a=n.component;return"ionBlur"===e&&(u=!1!==l.Bb(n,3)._handleBlurEvent(t.target)&&u),"ionChange"===e&&(u=!1!==l.Bb(n,3)._handleInputEvent(t.target)&&u),"ngModelChange"===e&&(u=!1!==(a.postData.feed=t)&&u),u},h.J,h.q)),l.pb(3,16384,null,0,b.Ib,[l.k],null,null),l.Db(1024,null,p.c,function(n){return[n]},[b.Ib]),l.pb(5,671744,null,0,p.h,[[8,null],[8,null],[8,null],[6,p.c]],{model:[0,"model"]},{update:"ngModelChange"}),l.Db(2048,null,p.d,null,[p.h]),l.pb(7,16384,null,0,p.e,[[4,p.d]],null,null),l.pb(8,49152,null,0,b.vb,[l.h,l.k,l.x],{placeholder:[0,"placeholder"]},null),(n()(),l.qb(9,0,null,null,4,"ion-item",[],null,null,null,h.B,h.i)),l.pb(10,49152,null,0,b.F,[l.h,l.k,l.x],null,null),(n()(),l.qb(11,0,null,0,2,"ion-button",[["color","mango"],["item-end",""]],null,[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.feedUpdateAction()&&l),l},h.u,h.b)),l.pb(12,49152,null,0,b.i,[l.h,l.k,l.x],{color:[0,"color"]},null),(n()(),l.Gb(-1,0,["Update"]))],function(n,e){n(e,5,0,e.component.postData.feed),n(e,8,0,"E..."),n(e,12,0,"mango")},function(n,e){n(e,2,0,l.Bb(e,7).ngClassUntouched,l.Bb(e,7).ngClassTouched,l.Bb(e,7).ngClassPristine,l.Bb(e,7).ngClassDirty,l.Bb(e,7).ngClassValid,l.Bb(e,7).ngClassInvalid,l.Bb(e,7).ngClassPending)})}let D=(()=>(class{constructor(n,e){this.changeDetectorRef=n,this.ngZone=e}transform(n){this.removeTimer();let e=new Date(n),t=new Date,l=Math.round(Math.abs((t.getTime()-e.getTime())/1e3)),u=Number.isNaN(l)?1e3:1e3*this.getSecondsUntilUpdate(l);this.timer=this.ngZone.runOutsideAngular(()=>"undefined"!=typeof window?window.setTimeout(()=>{this.ngZone.run(()=>this.changeDetectorRef.markForCheck())},u):null);let a=Math.round(Math.abs(l/60)),i=Math.round(Math.abs(a/60)),o=Math.round(Math.abs(i/24)),r=Math.round(Math.abs(o/30.416)),s=Math.round(Math.abs(o/365));return Number.isNaN(l)?"":l<=45?"a few seconds ago":l<=90?"a minute ago":a<=45?a+" minutes ago":a<=90?"an hour ago":i<=22?i+" hours ago":i<=36?"a day ago":o<=25?o+" days ago":o<=45?"a month ago":o<=345?r+" months ago":o<=545?"a year ago":s+" years ago"}ngOnDestroy(){this.removeTimer()}removeTimer(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)}getSecondsUntilUpdate(n){return n<60?2:n<3600?30:n<86400?300:3600}}))();class v{constructor(){}ngOnInit(){this.newTime=this.converTime(this.created)}converTime(n){return new Date(1e3*n)}}var k=l.ob({encapsulation:0,styles:[[""]],data:{}});function C(n){return l.Ib(0,[(n()(),l.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),l.Gb(1,null,[" "," "])),l.Cb(131072,D,[l.h,l.x])],null,function(n,e){var t=e.component;n(e,1,0,l.Hb(e,1,0,l.Bb(e,2).transform(t.newTime)))})}var U=t("SVse"),x=t("mrSG");let M=(()=>{class n{constructor(n){this.alertController=n}presentAlertConfirm(n,e){return x.b(this,void 0,void 0,function*(){let t;const l=yield this.alertController.create({header:n,message:e,buttons:[{text:"Annuler",role:"cancel"},{text:"Oui",role:"okay"}]});return yield l.present(),yield l.onDidDismiss().then(n=>{t=n}),t})}}return n.ngInjectableDef=l.Lb({factory:function(){return new n(l.Mb(b.a))},token:n,providedIn:"root"}),n})();class S{constructor(n,e){this.feedSerivce=n,this.alertSerivce=e,this.postData={user_id:"",token:"",feed_id:""}}ngOnInit(){this.feedSerivce.feedData$.subscribe(n=>{this.feedData=n})}feedDeleteAction(n,e){this.postData.user_id=this.loginUser.user_id,this.postData.token=this.loginUser.token,this.postData.feed_id=e,this.alertSerivce.presentAlertConfirm("publication supprim\xe9","Vous \xe9tes sur ?").then(e=>{"oui"===e.role&&this.feedSerivce.feedDelete(this.postData).subscribe(e=>{e.success&&this.feedSerivce.deleteFeedData(n)})})}}var q=l.ob({encapsulation:0,styles:[[".right[_ngcontent-%COMP%]{float:right}.right[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333!important}"]],data:{}});function w(n){return l.Ib(0,[(n()(),l.qb(0,0,null,null,9,"ion-card",[],null,null,null,h.w,h.c)),l.pb(1,49152,null,0,b.k,[l.h,l.k,l.x],null,null),(n()(),l.qb(2,0,null,0,7,"ion-card-content",[],null,null,null,h.v,h.d)),l.pb(3,49152,null,0,b.l,[l.h,l.k,l.x],null,null),(n()(),l.qb(4,0,null,0,2,"button",[["class","right"]],null,[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.feedDeleteAction(n.context.index,n.context.$implicit.feed_id)&&l),l},null,null)),(n()(),l.qb(5,0,null,null,1,"ion-icon",[["name","trash"]],null,null,null,h.z,h.g)),l.pb(6,49152,null,0,b.A,[l.h,l.k,l.x],{name:[0,"name"]},null),(n()(),l.qb(7,0,null,0,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(n()(),l.qb(8,0,null,0,1,"app-timeago",[],null,null,null,C,k)),l.pb(9,114688,null,0,v,[],{created:[0,"created"]},null)],function(n,e){n(e,6,0,"trash"),n(e,9,0,e.context.$implicit.created)},function(n,e){n(e,7,0,e.context.$implicit.feed)})}function y(n){return l.Ib(0,[(n()(),l.fb(16777216,null,null,1,null,w)),l.pb(1,278528,null,0,U.h,[l.L,l.I,l.q],{ngForOf:[0,"ngForOf"]},null)],function(n,e){n(e,1,0,e.component.feedData)},null)}var _=l.ob({encapsulation:0,styles:[[""]],data:{}});function B(n){return l.Ib(0,[(n()(),l.qb(0,0,null,null,6,"ion-header",[],null,null,null,h.y,h.f)),l.pb(1,49152,null,0,b.z,[l.h,l.k,l.x],null,null),(n()(),l.qb(2,0,null,0,4,"ion-toolbar",[],null,null,null,h.L,h.s)),l.pb(3,49152,null,0,b.zb,[l.h,l.k,l.x],null,null),(n()(),l.qb(4,0,null,0,2,"ion-title",[],null,null,null,h.K,h.r)),l.pb(5,49152,null,0,b.xb,[l.h,l.k,l.x],null,null),(n()(),l.Gb(-1,0,["Accueil"])),(n()(),l.qb(7,0,null,null,9,"ion-content",[],null,null,null,h.x,h.e)),l.pb(8,49152,null,0,b.s,[l.h,l.k,l.x],null,null),(n()(),l.qb(9,0,null,0,3,"ion-item",[],null,null,null,h.B,h.i)),l.pb(10,49152,null,0,b.F,[l.h,l.k,l.x],null,null),(n()(),l.qb(11,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),l.Gb(12,null,[" Bienvenue dans LovEvent ",""])),(n()(),l.qb(13,0,null,0,1,"app-feed-update",[],null,null,null,m,f)),l.pb(14,114688,null,0,g,[i],{loginUser:[0,"loginUser"]},null),(n()(),l.qb(15,0,null,0,1,"app-feed-card",[],null,null,null,y,q)),l.pb(16,114688,null,0,S,[i,M],{loginUser:[0,"loginUser"]},null)],function(n,e){var t=e.component;n(e,14,0,t.authUser),n(e,16,0,t.authUser)},function(n,e){var t=e.component;n(e,12,0,null==t.authUser?null:t.authUser.name)})}function F(n){return l.Ib(0,[(n()(),l.qb(0,0,null,null,1,"app-feed",[],null,null,null,B,_)),l.pb(1,114688,null,0,s,[o.a,i,r.a],null,null)],function(n,e){n(e,1,0)},null)}var I=l.mb("app-feed",s,F,{},{},[]),z=t("j1ZV"),O=t("iInd");t.d(e,"FeedPageModuleNgFactory",function(){return T});var T=l.nb(c,[],function(n){return l.yb([l.zb(512,l.j,l.Y,[[8,[d.a,I]],[3,l.j],l.v]),l.zb(4608,U.j,U.i,[l.s,[2,U.p]]),l.zb(4608,p.j,p.j,[]),l.zb(4608,b.b,b.b,[l.x,l.g]),l.zb(4608,b.Db,b.Db,[b.b,l.j,l.p]),l.zb(4608,b.Gb,b.Gb,[b.b,l.j,l.p]),l.zb(1073742336,U.b,U.b,[]),l.zb(1073742336,p.i,p.i,[]),l.zb(1073742336,p.b,p.b,[]),l.zb(1073742336,b.Bb,b.Bb,[]),l.zb(1073742336,z.a,z.a,[]),l.zb(1073742336,O.p,O.p,[[2,O.u],[2,O.m]]),l.zb(1073742336,c,c,[]),l.zb(1024,O.k,function(){return[[{path:"",component:s}]]},[])])})}}]);